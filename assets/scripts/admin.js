(()=>{var e={344:(e,t,r)=>{"use strict";r.r(t)}},t={};function r(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(344),function(r){"use strict";var i={},a=(r(window),r(document)),n=r(".selectbox-wraper select"),o=r(".fields-wrapper.image-upload"),l=r(".image-gallery"),c=r(".field-colorpicker"),u=r(".conditional-field"),s=function(e){return e.length>0};i.wpColorPicker=function(){s(c)&&c.wpColorPicker()},i.select2=function(){s(n)&&n.each((function(){var i=r(this).parent(".selectbox-wraper").data("multiselect"),a={multiple:!1};Boolean(i)&&(a.multiple=!0);var n=r(this).select2(function(r){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?e(Object(a),!0).forEach((function(e){t(r,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))}))}return r}({},a));Boolean(i)&&n.next().children().children().children().sortable({containment:"parent",stop:function(e,t){t.item.parent().children("[title]").each((function(){var e=r(this).attr("title"),t=r("option:contains("+e+")",n).first();t.detach(),n.append(t)})),n.change()}})}))},i.imageUpload=function(){s(o)&&(o.on("click",".upload-btn",(function(e){e.preventDefault();var t=e.target.closest(".field-wrapper"),r=t.querySelector(".preview-image"),i=t.querySelector(".image_input_field"),a=wp.media({title:"Insert image",library:{type:"image"},button:{text:"Use this image"},multiple:!1});a.on("open",(function(){var e=i.value.split(","),t=a.state().get("selection");e.forEach((function(e){var r=wp.media.attachment(e);r.fetch(),t.add(r?[r]:[])}))})),a.on("select",(function(){var e=a.state().get("selection").first().toJSON();r.style.backgroundImage="url("+e.url+")",i.value=e.id,t.querySelector(".preview-wrap").classList.remove("button-hide")})),a.open()})),o.on("click",".metabox-image-remove",(function(e){e.preventDefault();var t=e.target.closest(".field-wrapper"),r=t.querySelector(".preview-image");t.querySelector(".image_input_field").value="",r.style.backgroundImage="url(https://via.placeholder.com/700x200)",t.querySelector(".preview-wrap").classList.add("button-hide")})))},i.galleryImage=function(){s(l)&&(l.on("click",".upload-btn",(function(e){e.preventDefault();var t=e.target.closest(".field-wrapper"),r=t.querySelector(".preview-list"),i=t.querySelector(".image_input_field"),a=wp.media({title:"Insert image",library:{type:"image"},button:{text:"Use this image"},multiple:"add"});a.on("open",(function(){var e=i.value.split(","),t=a.state().get("selection");e.forEach((function(e){var r=wp.media.attachment(e);r.fetch(),t.add(r?[r]:[])}))})),a.on("select",(function(){var e=a.state().get("selection").toJSON(),t="",n=[];e.forEach((function(e){e.id&&(t+='<li class="preview-wrap" data-id='+e.id+'><div class="preview-image" style="background-image:url('+e.url+')"></div> <button class="metabox-image-remove"><span class="dashicons dashicons-no-alt"></span></button><a href="#" class="metabox-image-edit" target="_blank"> <span class="dashicons dashicons-edit-large"></span> </a> </li>',n.push(e.id))})),r.innerHTML=t;var o=n.filter((function(e){return 0!=e}));i.value=o})),a.open()})),l.on("click",".metabox-image-remove",(function(e){e.preventDefault();var t=e.target.closest(".preview-wrap"),r=e.target.closest(".field-wrapper").querySelector(".image_input_field"),i=t.getAttribute("data-id"),a=(a=r.value.split(",")).filter((function(e){return e!==i}));t.remove(),r.value=String(a)})),l.find("ul.preview-list").sortable({opacity:.8,stop:function(e){var t=e.target.closest(".field-wrapper").querySelector(".image_input_field"),r=[];Array.from(e.target.children).forEach((function(e){r.push(e.getAttribute("data-id"))}));var i=r.filter((function(e){return 0!=e}));console.log(i),t.value=String(i)}}))},i.checkBox=function(){var e=r(".fields-wrapper").find("[type=checkbox]");s(e)&&e.each((function(t,i){r(i).val(),r(i).on("change",(function(){var t=r(e).val();t&&1==t?r(i).val(0):t&&0==t&&r(i).val(1)}))}))},i.conditionalField=function(){s(u)&&u.each((function(e,t){var i=r(t),a=i.attr("data-required-value"),n="#"+i.attr("data-required-field");n=n.replace("field-",""),r(n).on("change",(function(){var e=r(n).val();a==e?(console.log("===="),console.log("required")):(console.log("===="),console.log("not required"))}))}))},a.on("ready",(function(){i.wpColorPicker(),i.select2(),i.imageUpload(),i.galleryImage(),i.checkBox(),i.conditionalField()}))}(jQuery)})()})();